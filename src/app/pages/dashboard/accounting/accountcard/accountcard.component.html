<app-page-heading [title]="'المحاسبه'" [subtitle]="'كارت الحساب'"></app-page-heading>

<form class="forms_dashboard" [formGroup]="accountCardForm" (ngSubmit)="onSubmit()">
  <div class="row">
    <div class="col-sm-12 col-lg-4">
      <div class="mb-3">
        <label for="username" class="form-label">اسم الحساب</label>
        <input type="text" name="" placeholder="اسم الحساب" id="username" maxlength="40" appNoNumberPaste
          class="form-control" formControlName="name">
        <ng-container *ngIf="accountCardForm.controls['name'].invalid && accountCardForm.controls['name'].touched">
          <small *ngIf="accountCardForm.controls['name'].hasError('required')" class="error_msg_form">اسم الحساب
            مطلوب</small>
        </ng-container>
      </div>
    </div>
    <div class="col-sm-12 col-lg-4">
      <div class="mb-3">
        <label for="numberaccount" class="form-label">رقم الحساب</label>
        <input type="text" name="" placeholder="رقم الحساب" id="numberaccount" maxlength="40" appNoNumberPaste readonly
          class="form-control" formControlName="accountNumber">
      </div>
    </div>
    <div class="col-sm-12 col-lg-4">
      <div class="mb-3">
        <label for="numberaccount" class="form-label">اسم حساب الاب</label>
        <!-- <input type="text" name="" placeholder="رقم الحساب" id="numberaccount" maxlength="40" appNoNumberPaste class="form-control" formControlName="name"> -->
        <ng-select [items]="accountParentList" [bindLabel]="'name'" [bindValue]="'id'" [virtualScroll]="true"
          placeholder="اسم حساب الاب" formControlName="parentId"></ng-select>
        <ng-container
          *ngIf="accountCardForm.controls['parentId'].invalid && accountCardForm.controls['parentId'].touched">
          <small *ngIf="accountCardForm.controls['parentId'].hasError('required')" class="error_msg_form">اسم حساب الاب
            مطلوب</small>
        </ng-container>
      </div>
    </div>
    <div class="col-sm-12">
      <div class="mb-3">
        <label for="byan" class="form-label">البيان</label>
        <textarea class="form-control" id="byan" rows="3" placeholder="اكتب المحتوي" style="height: 124px !important;"
          formControlName="notes"></textarea>
        <!-- <app-formerror-msg [control]="paymentVoucherForm.controls['notes']" [Messages]="{
               required:'البيان مطلوب'
             }"></app-formerror-msg> -->
      </div>
    </div>
  </div>
  <div class="btn_add_reset">
    <button type="submit" data-type="save" data-button="send"
      [ngClass]="{'btnEdit':this.btnAddandUpdate=='update','btnAdd':this.btnAddandUpdate=='add'}">{{btnAddandUpdate ==
      'add'?'اضافه':'تعديل'}}</button>
    <button type="reset" data-button="reset" (click)="this.btnAddandUpdate ='add'">جديد</button>
  </div>
</form>

<div class="table-responsive">
  <table>
    <thead>
      <tr>
        <th scope="col">م</th>
        <th scope="col">اسم الحساب</th>

        <th scope="col">رقم الحساب</th>

        <th scope="col">الادوات</th>
        <!-- <th scope="col">Handle</th> -->
      </tr>
    </thead>
    <tbody>

      @for (accountCardItem of accountCardList; track $index) {
      <tr>
        <td>{{$index + 1}}</td>
        <td>{{accountCardItem.name}}</td>
        <td>{{accountCardItem.id}}</td>
        <td>
          <div class="d-flex align-items-center justify-content-center">

            <div class="btn_edit">
              <button type="button" data-button="edit"><svg width="33" height="26" viewBox="0 0 33 26" fill="none"
                  (click)="onEdit(accountCardItem.id)" xmlns="http://www.w3.org/2000/svg">
                  <rect y="0.5" width="33.0001" height="25.0001" rx="2" fill="#E0ECE1" />
                  <path
                    d="M11 8.5H10C9.46957 8.5 8.96086 8.71071 8.58579 9.08579C8.21071 9.46086 8 9.96957 8 10.5V19.5C8 20.0304 8.21071 20.5391 8.58579 20.9142C8.96086 21.2893 9.46957 21.5 10 21.5H19C19.5304 21.5 20.0391 21.2893 20.4142 20.9142C20.7893 20.5391 21 20.0304 21 19.5V18.5"
                    stroke="#16601A" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" />
                  <path
                    d="M20 6.50011L23 9.50011M24.385 8.08511C24.7788 7.69126 25.0001 7.15709 25.0001 6.60011C25.0001 6.04312 24.7788 5.50895 24.385 5.11511C23.9912 4.72126 23.457 4.5 22.9 4.5C22.343 4.5 21.8088 4.72126 21.415 5.11511L13 13.5001V16.5001H16L24.385 8.08511Z"
                    stroke="#16601A" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" />
                </svg>
              </button>

            </div>


          </div>
        </td>
      </tr>
      }@empty {
      <tr>
        <td class="empty-cell" colspan="6">
          <app-emptytable></app-emptytable>
        </td>
      </tr>
      }
    </tbody>
  </table>
</div>
<div class="mb-3">
  <app-pagination [totalPages]="total" [currentPage]="pageIndex" (pageChange)="onPageChanged($event)">
  </app-pagination>
</div>






<!-- <app-confirm-delete [isVisible]="showDelete" (onDelete)="deleteConfirmed($event)" [itemId]="this.deleteId" (toggleModal)="onClose()"></app-confirm-delete> -->