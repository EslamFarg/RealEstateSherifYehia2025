<app-page-heading [title]="'العقود'" [subtitle]="'انهاء عقد'" [AddBtn]="true" [TitlePageAddBtn]="'مستكشف العقود'" [ExplorerRoute]="'/dashboard/addcontract/explorercontract'"></app-page-heading>

<div class="addContract_acco">


<div ngbAccordion [closeOthers]="true" >
  <div ngbAccordionItem [collapsed]="false">
    <h2 ngbAccordionHeader>
      <button ngbAccordionButton>العقد</button>
    </h2>
    <div ngbAccordionCollapse>
      <div ngbAccordionBody>
        <!-- <ng-template> -->

           <div class="forms_dashboard"  [formGroup]="form">
        <div class="row row_part">

     

          <div class="row number_search">
<div class="mb-4 col-sm-12  col-lg-3 number_contract">
                 <label for="contractnumber" class="form-label">رقم العقد</label>
                 <input type="text" class="form-control"  id="contractnumber" placeholder="رقم العقد" readonly formControlName="contractNumber">
                
        </div>
  <div class="col-sm-12 col-lg-3 mb-4 search_contract" style="align-self: flex-end;">
        <label  class="form-label" ></label>
        <div class="search_number_component">
<input type="text" name="" placeholder="بحث برقم البلاغ"  class="form-control">

<div class="search">
    <svg width="21" height="20" viewBox="0 0 21 20" fill="none" xmlns="http://www.w3.org/2000/svg">
<path d="M10.7501 17.4998C6.37783 17.4998 2.83342 13.9554 2.83342 9.58317C2.83342 5.21092 6.37783 1.6665 10.7501 1.6665C15.1223 1.6665 18.6667 5.21092 18.6667 9.58317C18.6667 13.9554 15.1223 17.4998 10.7501 17.4998Z" stroke="#7F7F7F" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/>
<path d="M2.00008 18.3332L3.66675 16.6665" stroke="#7F7F7F" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/>
</svg>

</div>
        </div>
        
    </div>
          </div>





        <div class="mb-4 col-sm-12 col-lg-6 readonly_input">
                 <label for="placecontract" class="form-label">مكان ابرام العقد</label>
                 <input type="text" class="form-control" readonly id="placecontract"  style="padding-right: 110px;" formControlName="contractPlace">
             
        </div>
        <div class="mb-4 col-sm-12  col-lg-6 readonly_input">
                 <label for="dateebramcontract"  class="form-label">تاريخ ابرام العقد</label>

        <input type="text"  class="form-control" id="dateebramcontract" readonly style="padding-right: 110px;" formControlName="contractDate">

         
 </div>  
        <div class="mb-4 col-sm-12  col-lg-3 readonly_input">
                 <label for="dateebramcontract"  class="form-label">تاريخ بدايه العقد</label>

        <input type="text"  class="form-control" id="dateebramcontract" readonly formControlName="leaseStartDate" style="padding-right: 110px;">

         
 </div>  
        <div class="mb-4 col-sm-12  col-lg-3 readonly_input">
                 <label for="dateebramcontract"  class="form-label">تاريخ نهايه العقد</label>

        <input type="text"  class="form-control" id="dateebramcontract" readonly  formControlName="leaseEndDate" style="padding-right: 110px;">

         
 </div>  
      
        <div class="mb-4 col-sm-12  col-lg-6">
          
 
            <div class="input_rent_container">
                <input type="text"  id="monthsInput"  class="form-control"   readonly  style="background-color: #BED2BF;">

                <div class="months">

                  <div class="prev_month" (click)="prevMonth()">
                    <svg width="16" height="16" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg">
<rect x="16" y="16" width="16" height="16" rx="2" transform="rotate(180 16 16)" fill="#D4AF37"/>
<path d="M10.0605 2.72003L5.71388 7.0667C5.20055 7.58003 5.20055 8.42003 5.71388 8.93336L10.0605 13.28" stroke="white" stroke-width="1.5" stroke-miterlimit="10" stroke-linecap="round" stroke-linejoin="round"/>
</svg>

                  </div>
                 <div class="container_months" #containerMonths>
   <div class="box" *ngFor="let m of monthsBetween">
      {{ m }}
   </div>
</div>



                  <div class="next_months" (click)="nextMonth()">
                  <svg width="16" height="16" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg">
                      <rect width="16" height="16" rx="2" transform="matrix(1 0 0 -1 0 16)" fill="#D4AF37"/>
                      <path d="M5.93945 2.72003L10.2861 7.0667C10.7995 7.58003 10.7995 8.42003 10.2861 8.93336L5.93945 13.28" stroke="white" stroke-width="1.5" stroke-miterlimit="10" stroke-linecap="round" stroke-linejoin="round"/>
                  </svg>

                  </div>
               
                </div>
                <p class="count_months" >
                  {{this.form.get('leaseMonths')?.value}} شهور
                </p>
            </div>
          
      

 </div>  





           
</div>
</div>

        <!-- </ng-template> -->
      </div>
    </div>
  </div>
</div>
<div ngbAccordion>
  <div ngbAccordionItem [collapsed]="false">
    <h2 ngbAccordionHeader>
      <button ngbAccordionButton>الوحده</button>
    </h2>
    <div ngbAccordionCollapse>
      <div ngbAccordionBody>
        <!-- <ng-template> -->

     <div class="forms_dashboard " [formGroup]="form">
      <div class="row">
      

        <div class="col-lg-4">
          <div class="mb-3 readonly_input">
            <label for="property"class="form-label" style=" right: 12px !important;">العقار</label>
            <input type="text" readonly placeholder="العقار" formControlName="propertyName" id="property" class="form-control" style="padding-right: 60px;    ">


          </div>
        </div>
        <div class="col-lg-4">
          <div class="mb-3 readonly_input">
            <label for="door" class="form-label"  style=" right: 12px !important;">الدور</label>
            <input type="text" readonly formControlName="floorNumber" placeholder="الدور" id="door" class="form-control" readonly  style="padding-right: 50px;    ">


          </div>
        </div>
        <div class="col-lg-4">
          <div class="mb-3 readonly_input">
            <label for="building" class="form-label" style=" right: 12px !important;">الوحده</label>
            <input type="text" placeholder="الوحده" id="building" class="form-control" readonly formControlName="name" style="padding-right: 60px;">
          </div>
        </div>
        <div class="col-lg-4"> 
          <div class="mb-3 readonly_input">
            <label for="city" class="form-label" style=" right: 12px !important;">المدينه</label>
            <input type="text" placeholder="المدينه" id="city" class="form-control" readonly formControlName="city" style="padding-right: 60px;">
          </div>
        </div>
        <div class="col-lg-4">
          <div class="mb-3 readonly_input">
            <label for="hay" class="form-label" style=" right: 12px !important;">الحي</label>
            <input type="text" placeholder="الحي" id="hay" class="form-control" formControlName="district" readonly style="padding-right: 50px;">
          </div>
        </div>
        <div class="col-lg-4">
          <div class="mb-3 readonly_input">
            <label for="street" class="form-label" style=" right: 12px !important;">الشارع</label>
            <input type="text" placeholder="الشارع" id="street" class="form-control" formControlName="street" readonly style="padding-right: 60px;">
          </div>
        </div>
      
      </div>
    </div>

        <!-- </ng-template> -->
      </div>
    </div>
  </div>
</div>
<div ngbAccordion>
  <div ngbAccordionItem [collapsed]="false">
    <h2 ngbAccordionHeader>
      <button ngbAccordionButton>المستأجر</button>
    </h2>
    <div ngbAccordionCollapse>
      <div ngbAccordionBody>
        <ng-template>

     <form class="forms_dashboard" [formGroup]="form">
    <div class="row">
      

           <div class="row row_part m-auto px-0">

     
<div class="pt-3 readonly_container" style="border: 1px solid #BFDBC9; border-radius: 4px; ">
    <div class="row">
<div class="mb-3 col-sm-12  col-lg-4 readonly_input">
                 <label for="username" class="form-label">الاسم</label>
                 <input type="text" style="padding-right: 50px;"  class="form-control" id="username" readonly   
        name="fullName" formControlName="tenantName">
        </div>
        <div class="mb-3 col-sm-12  col-lg-4 readonly_input">
                 <label for="phonenumber" class="form-label"  >رقم الجوال</label>
              
                 <input type="text" formControlName="tenantPhone" name="phonenumber" readonly style="padding-right: 74px;" id="phonenumber"  class="form-control" >
        </div>

         <div class="mb-3 col-sm-12  col-lg-4 readonly_input">
                 <label for="nationality" class="form-label" >الجنسيه</label>
                 <input type="text" class="form-control" formControlName="tenantNationality" readonly id="nationality"  style="padding-right: 60px;" >
        </div>
                <div class="mb-3 col-sm-12  col-lg-4 readonly_input">
                 <label for="email" class="form-label">البريد الالكتروني</label>
 

        <input type="email" class="form-control" id="email" formControlName="tenantemail"  readonly style="padding-right: 105px;">
 </div>  

       <div class="mb-3 col-sm-12  col-lg-4 readonly_input">
                 <label  class="form-label" >رقم الهويه </label>
 

            <input type="text" class="form-control" formControlName="tenantnationalID" readonly style="padding-right: 75px;" id="idnumber" >
 </div>  


       <div class="mb-3 col-sm-12  col-lg-4 readonly_input">
                 <label  class="form-label d-block"> عدد المرافقين    
                 </label>      
                 <input type="text" class="form-control" id="copy" formControlName="tenantdependants"   readonly style="pointer-events: none; padding-right    : 100px;"> 
                 
               
            </div>   

       


  

      </div>
      </div>
      </div>
      <!-- </div>  -->
<!-- </div>  -->
   
    <!-- </div> -->


    </div>
    </form>

        </ng-template>
      </div>
    </div>
  </div>
</div>
<div ngbAccordion>
  <div ngbAccordionItem [collapsed]="false">
    <h2 ngbAccordionHeader>
      <button ngbAccordionButton>السمسار</button>
    </h2>
    <div ngbAccordionCollapse>
      <div ngbAccordionBody>
        <ng-template>

     <form class="forms_dashboard" [formGroup]="form">
    <div class="row">
        

           <div class="row row_part m-auto px-0">

     
<div class="pt-3 readonly_container" style="border: 1px solid #BFDBC9; border-radius: 4px; ">
    <div class="row">
<div class="mb-3 col-sm-12  col-lg-4 readonly_input">
                 <label for="username" class="form-label">الاسم</label>
                 <input type="text" style="padding-right: 50px;"  class="form-control" id="username" readonly   
        name="fullName" formControlName="brokerName">
        </div>

         <div class="mb-3 col-sm-12  col-lg-4 readonly_input">
                 <label  class="form-label" >رقم الهويه </label>
 

            <input type="text" class="form-control" formControlName="brokerNationalId" readonly style="padding-right: 75px;" id="idnumber" >
 </div>  
        <div class="mb-3 col-sm-12  col-lg-4 readonly_input">
                 <label for="phonenumber" class="form-label"  >رقم الجوال</label>
              
                 <input type="text" formControlName="brokerPhone" name="phonenumber" readonly style="padding-right: 74px;" id="phonenumber"  class="form-control" >
        </div>

      
      


    

       


  

      </div>
      </div>
      </div>
      <!-- </div>  -->
<!-- </div>  -->
   
    <!-- </div> -->


    </div>
    </form>

        </ng-template>
      </div>
    </div>
  </div>
</div>
<div ngbAccordion>
  <div ngbAccordionItem [collapsed]="false">
    <h2 ngbAccordionHeader>
      <button ngbAccordionButton>الماليه</button>
    </h2>
    <div ngbAccordionCollapse>
      <div ngbAccordionBody>
        <ng-template>

   <form class="forms_dashboard" [formGroup]="form">
    <div class="row">

             
<div class="pt-3 readonly_container mb-3" style="border: 1px solid #BFDBC9; border-radius: 4px; ">
    <div class="row">
<div class="mb-3 col-sm-12  col-lg-4 readonly_input">
                 <label for="username" class="form-label">قيمه العقد</label>
                 <input type="text" style="padding-right: 80px;"  class="form-control" id="username" readonly   
        name="fullName" formControlName="contractValue">
        </div>
        <div class="mb-3 col-sm-12  col-lg-4 readonly_input">
                 <label for="phonenumber" class="form-label"  >الضريبه</label>
              
                 <input type="text" formControlName="taxAmount" name="phonenumber" readonly style="padding-right: 60px;" id="phonenumber"  class="form-control" >
        </div>

         <div class="mb-3 col-sm-12  col-lg-4 readonly_input">
                 <label for="nationality" class="form-label" >الاجمالي</label>
                 <input type="text" class="form-control" formControlName="totalAmount" readonly id="nationality"  style="padding-right: 60px;" >
        </div>
                <div class="mb-3 col-sm-12  col-lg-3 readonly_input">
                 <label for="email" class="form-label">عموله السمسار</label>
 

        <input type="email" class="form-control" id="email" formControlName="brokerCommission"  readonly style="padding-right: 105px;">
 </div>  
                <div class="mb-3 col-sm-12  col-lg-3 readonly_input">
                 <label for="email" class="form-label">عموله اخري</label>
 

        <input type="email" class="form-control" id="email" formControlName="otherCommission"  readonly style="padding-right: 90px;">
 </div>  
                <div class="mb-3 col-sm-12  col-lg-3 readonly_input">
                 <label for="email" class="form-label">قيمه التأمين</label>
 

        <input type="email" class="form-control" id="email" formControlName="insuranceValue"  readonly style="padding-right: 90px;">
 </div>  
                <div class="mb-3 col-sm-12  col-lg-3 readonly_input">
                 <label for="email" class="form-label">الصافي</label>
 

        <input type="email" class="form-control" id="email" formControlName="netAmount"  readonly style="padding-right: 55px;">
 </div>  



      </div>
      </div>


      
 <div class="col-sm-12 col-lg-3 mb-3">
    <label for="" class="form-label">استرداد الشهور</label>
    <input type="text" name="" id="" class="form-control" readonly formControlName="refundedMonths">
    
 </div>
 <div class="col-sm-12 col-lg-3 mb-3">
    <label for="" class="form-label">الضريبه</label>
    <input type="text" name="" id="" class="form-control" readonly formControlName="refundTax">

 </div>
 <div class="col-sm-12 col-lg-3 mb-3">
    <label for="" class="form-label">استرداد التامين</label>
    <input type="text" name="" id="" class="form-control" placeholder="0" appNoStringPaste formControlName="refundInsuranceValue">

 </div>
 <div class="col-sm-12 col-lg-3 mb-3">
    <label for="" class="form-label">صافي المبلغ المسترد</label>
    <input type="text" name="" id="" class="form-control" readonly formControlName="refundNet">

 </div>
  <div class="col-sm-12  mb-3">
      <label for="" class="form-label">صندوق / بنك</label>
      <ng-select [items]="accountData" [appendTo]="'body'" [virtualScroll]="true"  bindLabel="name"  formControlName="financiallyAccountId"  (change)="financiallyData($event)" placeholder="صندوق / بنك"></ng-select>

  </div>



    </div>
    </form>

        </ng-template>
      </div>
    </div>
  </div>
</div>
<div ngbAccordion>
  <div ngbAccordionItem [collapsed]="false">
    <h2 ngbAccordionHeader>
      <button ngbAccordionButton>الرسائل</button>
    </h2>
    <div ngbAccordionCollapse>
      <div ngbAccordionBody>
        <ng-template>

      <form class="forms_dashboard" [formGroup]="form">
    <div class="row">
       <div class="col-sm-12 " style="margin-bottom: 30px;"> 
        <label for="message" class="form-label">اسم الرساله</label>
        <ng-select [items]="datamsg" (change)="changeMsg($event)" bindLabel="name" bindValue="id"  placeholder="اسم الرساله" formControlName="messageId"></ng-select>
       </div>

       <div class="col-sm-12">
        <textarea name="" id="" style="font-size: 15px; font-weight: 400; color: #16601A; 
        border: 1px solid #BED2BF !important;
        border-radius: 5px;
        width: 100%; height: 78px;
        margin-bottom: 30px;
        padding: 10px;
        

        " formControlName="messageText"></textarea>
       </div>

    
       <div class="col-lg-6">
        <label for="tareka" class="form-label">طريقه الارسال </label>

        <div class="tareka_send">
          <div class="d-flex algin-items-center gap-5 flex-wrap">
           <div class="d-flex align-items-center gap-2">
         
             <input type="checkbox" class="form-check" name="" id="sms" formControlName="useSms">
                 <label for="sms">SMS</label>
           </div>
           <div class="d-flex align-items-center gap-2">
            <input type="checkbox" class="form-check" name="" formControlName="useWhatsApp" id="whatsapp"> 
            <label for="whatsapp">واتساب</label>
             
           </div>
           <div class="d-flex align-items-center gap-2">
            <input type="checkbox" class="form-check" name="" id="email" formControlName="useEmail"> 
            <label for="email">البريد الالكتروني</label>
             
           </div>
            

          </div>
          
        </div>
       </div>
    </div>
    </form>

        </ng-template>
      </div>
    </div>
  </div>
</div>
</div>


  <div class="btns_add_edit">
 <button data-type="save" (click)="EndedContract()">انهاء</button>
 <button type="button" (click)="this.isVisiablePrint=true">طباعه </button>

  </div>


  <!-- <app-printpage-contracts []></app-printpage-contracts> -->

  
   <app-printpage-contracts [isVisible]="isVisiablePrint" [getDataPopup]="getDataPrint" (closePopup)="isVisiablePrint = false"></app-printpage-contracts>
